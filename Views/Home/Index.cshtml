@using System.Linq
@model MDS_PROJECT.Controllers.HomeController.SearchViewModel

<!-- HTML Form -->
<form asp-controller="Home" asp-action="SearchBoth" method="post">
    <input type="text" name="query" placeholder="Caută un produs...">
    <button type="submit">Caută</button>
</form>

<!-- Results Section -->
<div class="results-container">
    <div class="results">
        <h2>Carrefour</h2>
        @if (Model.CarrefourResults != null && Model.CarrefourResults.Any())
        {
            <div>
                <button onclick="sortCarrefourResultsByPrice()">Sort by Price</button>
                <button onclick="sortCarrefourResultsByName()">Sort by Name</button>
            </div>
            <ul class="product-list">
                @foreach (var item in Model.CarrefourResults)
                {
                    <li>&#8226; @item.ItemName, @item.Quantity @item.MeasureQuantity, @item.Price Lei</li>
                }
            </ul>
        }
        else
        {
            <p class="no-results">Nu s-au găsit rezultate pentru Carrefour.</p>
        }
    </div>

    <div class="results">
        <h2>Kaufland</h2>
        @if (Model.KauflandResults != null && Model.KauflandResults.Any())
        {
            <div>
                <button onclick="sortKauflandResultsByPrice()">Sort by Price</button>
                <button onclick="sortKauflandResultsByName()">Sort by Name</button>
            </div>
            <ul class="product-list">
                @foreach (var item in Model.KauflandResults)
                {
                    <li>&#8226; @item.ItemName, @item.Quantity @item.MeasureQuantity, @item.Price Lei</li>
                }
            </ul>
        }
        else
        {
            <p class="no-results">Nu s-au găsit rezultate pentru Kaufland.</p>
        }
    </div>
</div>

<!-- CSS Styling -->
<style>
    .results-container {
        display: flex;
        justify-content: space-between;
    }

    .results {
        width: 45%;
    }

    .product-list {
        padding: 0;
    }

        .product-list li {
            margin-bottom: 10px;
        }

    .no-results {
        color: red;
    }
</style>

<!-- JavaScript Functions -->
<script>
    function sortCarrefourResultsByPrice() {
        // Implement sorting logic for Carrefour results by price
    }

    function sortCarrefourResultsByName() {
        // Implement sorting logic for Carrefour results by name
    }

    function sortKauflandResultsByPrice() {
        // Implement sorting logic for Kaufland results by price
    }

    function sortKauflandResultsByName() {
        // Implement sorting logic for Kaufland results by name
    }
</script>
